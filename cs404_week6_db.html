<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="lib/jquery.js"></script>
<script src="lib/persist.js"></script>

<style>
body {
	font-family: Verdana,sans-serif;
    color: white;
    background: black;
}

a {
	text-decoration: none;
	color: #00FF00;
}

a:hover {
	text-decoration: underline;
}

textarea#cs404Data {
	font-family: Verdana,sans-serif;
	background: #D0D0D0;
	width: 40em;
	height: 12em;
}

#cs404OutputWrapper {
	width: 40em;
	height: 8em;
	margin-top: 1em;
	border-style: solid;
	border-width: 1px;
	border-color: green;
}

#cs404Output {
	padding: 8px;
}

</style>
<script type="text/javascript" charset="utf-8">
// debug with the IDE

var DB_KEY = "someData";

var getDataString = function() {
	return $("#cs404Data").val();
}

var setOutput = function(htmlOutputString) {
	$("#cs404Output").html(htmlOutputString);
}

function saveData() {
	var db = new Persist.Store("cs404", {
      swf_path: "lib/persist.swf"
    });
    var val = getDataString();
    console.log("Saving " + val.length + " bytes of data to the database.");
    db.set(DB_KEY, val);
}

function loadData() {
	var db = new Persist.Store("cs404", {
      swf_path: "lib/persist.swf"
    });
    console.log("Reading '" + DB_KEY + "' key from the database.");
    db.get(DB_KEY, function (isOkay, val) {
    	console.log("In database callback, isOkay = " + isOkay + ", val = '" + val + "'");
    	setOutput(val);
    });
}

</script>
</head>
<body>

  <h3>Database</h3>

  Document:<br>
  <textarea id="cs404Data" cols=80 rows=12></textarea><br>
  <a href="javascript:saveData()">Save Data</a> | <a href="javascript:loadData()">Load Data</a><br>
  <div id="cs404OutputWrapper"><div id="cs404Output"></div></div>

</body>
</html>
